@{
    ViewBag.Title = "Manager - Remove Customer";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    var customers = ViewBag.Customers as List<MVCBank.Models.Customer>;
    var q = ViewBag.Query as string;
}

<h2>Remove Customer</h2>

@if (!string.IsNullOrEmpty(ViewBag.SuccessMessage))
{
    <div class="alert alert-success">@ViewBag.SuccessMessage</div>
}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<div class="mb-3" style="max-width:500px;">
    <form method="get" action="@Url.Action("RemoveCustomer", "Manager")" class="d-flex" style="gap:8px;">
        <input type="text" name="q" value="@q" class="form-control" placeholder="Search by name, id, PAN or phone" />
        <button type="submit" class="btn btn-secondary">Search</button>
    </form>
</div>

<form method="post" action="@Url.Action("RemoveCustomer", "Manager")">
    @Html.AntiForgeryToken()

    <div class="table-responsive" style="max-height:420px; overflow:auto;">
        <table class="table table-striped table-hover align-middle">
            <thead>
                <tr>
                    <th></th>
                    <th>Customer ID</th>
                    <th>Name</th>
                    <th>PAN</th>
                    <th>Phone</th>
                    <th>Address</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody>
            @if (customers != null && customers.Count > 0)
            {
                foreach (var c in customers)
                {
                    <tr>
                        <td><input type="radio" name="custId" value="@c.CustID" /></td>
                        <td>@c.CustID</td>
                        <td>@c.CustName</td>
                        <td>@c.PAN</td>
                        <td>@c.PhoneNumber</td>
                        <td>@c.Address</td>
                        <td><a class="btn btn-sm btn-primary" href="@Url.Action("EditCustomer", "Manager", new { id = c.CustID })">Edit</a></td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="7" class="text-muted">No customers found.</td></tr>
            }
            </tbody>
        </table>
    </div>

    <div class="mt-2">
        <button type="submit" class="btn btn-danger">Remove Selected Customer</button>
        <a class="btn btn-link" href="@Url.Action("Dashboard","Manager")">Back to Dashboard</a>
    </div>
</form>
