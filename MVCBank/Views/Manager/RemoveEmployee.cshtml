@{
    ViewBag.Title = "Manager - Remove Employee";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    var employees = ViewBag.Employees as List<MVCBank.Models.Employee>;
    var q = ViewBag.Query as string;
}

<h2>Remove Employee</h2>

@if (!string.IsNullOrEmpty(ViewBag.SuccessMessage))
{
    <div class="alert alert-success">@ViewBag.SuccessMessage</div>
}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<div class="mb-3" style="max-width:500px;">
    <form method="get" action="@Url.Action("RemoveEmployee", "Manager")" class="d-flex" style="gap:8px;">
        <input type="text" name="q" value="@q" class="form-control" placeholder="Search by name, id, dept or PAN" />
        <button type="submit" class="btn btn-secondary">Search</button>
    </form>
</div>

<form method="post" action="@Url.Action("RemoveEmployee", "Manager")">
    @Html.AntiForgeryToken()

    <div class="table-responsive" style="max-height:420px; overflow:auto;">
        <table class="table table-striped table-hover align-middle">
            <thead>
                <tr>
                    <th></th>
                    <th>Emp ID</th>
                    <th>Name</th>
                    <th>Dept</th>
                    <th>PAN</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody>
            @if (employees != null && employees.Count > 0)
            {
                foreach (var e in employees)
                {
                    <tr>
                        <td><input type="radio" name="empId" value="@e.EmpID" /></td>
                        <td>@e.EmpID</td>
                        <td>@e.EmpName</td>
                        <td>@e.DeptID</td>
                        <td>@e.PAN</td>
                        <td><a class="btn btn-sm btn-primary" href="@Url.Action("EditEmployee", "Manager", new { id = e.EmpID })">Edit</a></td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="6" class="text-muted">No employees found.</td></tr>
            }
            </tbody>
        </table>
    </div>

    <div class="mt-2">
        <button type="submit" class="btn btn-danger">Remove Selected Employee</button>
        <a class="btn btn-link" href="@Url.Action("Dashboard","Manager")">Back to Dashboard</a>
    </div>
</form>